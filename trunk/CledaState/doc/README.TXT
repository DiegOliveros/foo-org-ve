http://smc.sourceforge.net/
http://realfiction.net/go/57
STATE DESIGN PATTERN
